
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")

local player = Players.LocalPlayer


local ScreenGui = Instance.new("ScreenGui")
local Frame = Instance.new("Frame")
local Top = Instance.new("Frame")
local Title = Instance.new("TextLabel")
local Button = Instance.new("TextButton")

ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.ResetOnSpawn = false

Frame.Parent = ScreenGui
Frame.BackgroundColor3 = Color3.fromRGB(34,34,34)
Frame.Size = UDim2.new(0,158,0,110)
Frame.Position = UDim2.new(0.39,0,0.43,0)
Frame.Active = true
Frame.Draggable = true
Frame.BorderSizePixel = 0

Top.Parent = Frame
Top.BackgroundColor3 = Color3.fromRGB(50,50,50)
Top.Size = UDim2.new(1,0,0,25)
Top.BorderSizePixel = 0

Title.Parent = Top
Title.BackgroundTransparency = 1
Title.Size = UDim2.new(1,0,1,0)
Title.Text = "Touch Fling"
Title.Font = Enum.Font.Sarpanch
Title.TextSize = 25
Title.TextColor3 = Color3.new(1,1,1)

Button.Parent = Frame
Button.Position = UDim2.new(0.11,0,0.42,0)
Button.Size = UDim2.new(0,121,0,37)
Button.Text = "OFF"
Button.Font = Enum.Font.SourceSansItalic
Button.TextSize = 20
Button.BackgroundColor3 = Color3.new(1,1,1)
Button.BorderSizePixel = 0


local flingEnabled = false
local POWER = 12000
local UP = 9000
local wobble = 1

-- connections
local flingConn
local antiConn


local function startAntiFling()
	if antiConn then antiConn:Disconnect() end

	antiConn = RunService.Stepped:Connect(function()
		local char = player.Character
		if not char then return end

		local hrp = char:FindFirstChild("HumanoidRootPart")
		if not hrp then return end

		local v = hrp.AssemblyLinearVelocity

		-- detect abnormal fling velocity
		if math.abs(v.X) > 400 or math.abs(v.Y) > 400 or math.abs(v.Z) > 400 then
			hrp.AssemblyLinearVelocity = Vector3.zero
			hrp.AssemblyAngularVelocity = Vector3.zero
		end
	end)
end

local function startFling()
	if flingConn then flingConn:Disconnect() end

	flingConn = RunService.Heartbeat:Connect(function()
		if not flingEnabled then return end

		local char = player.Character
		if not char then return end

		local hrp = char:FindFirstChild("HumanoidRootPart")
		if not hrp then return end

		local vel = hrp.AssemblyLinearVelocity

		hrp.AssemblyLinearVelocity =
			vel * POWER + Vector3.new(0, UP, 0)

		RunService.RenderStepped:Wait()

		hrp.AssemblyLinearVelocity =
			Vector3.new(vel.X, wobble, vel.Z)

		wobble = -wobble
	end)
end


Button.MouseButton1Click:Connect(function()
	flingEnabled = not flingEnabled
	Button.Text = flingEnabled and "ON" or "OFF"

	if flingEnabled then
		startFling()
	else
		if flingConn then
			flingConn:Disconnect()
			flingConn = nil
		end
	end
end)


player.CharacterAdded:Connect(function()
	startAntiFling()
	if flingEnabled then
		startFling()
	end
end)

-- start anti-fling immediately
startAntiFling()
